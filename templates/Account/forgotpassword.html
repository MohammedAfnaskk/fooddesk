{%load static%}
  <!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{%static 'logincss/fonts/icomoon/style.css'%}">

    <link rel="stylesheet" href="{%static 'logincss/css/owl.carousel.min.css'%}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{%static 'logincss/css/bootstrap.min.css'%}">
    
    <!-- Style -->
    <link rel="stylesheet" href="{%static 'logincss/css/style.css'%}">

    <title>Login #2</title>
  </head>
  <body>
    {% if messages %}

    {% for message in messages %}
  
    <div id="error-message" class="text-center text-danger pt-3"></button>
      <strong>{{message}}</strong>
    </div>
    {% endfor %}
    {%endif%}

    {% if otp %}
    
    <div class="d-lg-flex half">
    <div class="bg order-1 order-md-2" style="background-image: url({%static 'logincss/images/bg_2.jpg'%});"></div>
    <div class="contents order-2 order-md-1">

      <div class="container">
        <div class="row align-items-center justify-content-center">
          <div class="col-md-7">
            <h3>Forgot Password<strong>Foodie</strong></h3>
            <form class="row contact_form" action="{%url 'forgotpassword'%}" method="post">
             {% csrf_token %}
             <input  type="hidden" name="email" value="{{usr.email}}">
             <div class="form-group last mb-3">
              <label >Email OTP</label>
              <input type="number" class="form-control" placeholder="Email Otp" id="password"name="otp" required/>
            </div>
            <div class="form-group last mb-3">
              <label >New Password</label>
              <input type="text" class="form-control" placeholder="New Password" id="password"name="password1" required/>
            </div>
            <div class="form-group last mb-3">
              <label >Confirm Password</label>
              <input type="text" class="form-control" placeholder="Confirm Password" id="password"name="password2" required/>
            </div>


            <input type="submit" value="Submit" class="btn btn-block btn-primary">
            <div class="d-flex mb-5 align-items-center">
              <label class="control control--checkbox1 mb-0"><span class="captions">New to Foodie? <a href="{%url 'signup'%}"> Create account</a></span>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
         
{% else %}

  <div class="d-lg-flex half">
    <div class="bg order-1 order-md-2" style="background-image: url({%static 'logincss/images/bg_2.jpg'%});"></div>
    <div class="contents order-2 order-md-1">

      <div class="container">
        <div class="row align-items-center justify-content-center">
          <div class="col-md-7">
            <h3>Forgot Password<strong>Foodie</strong></h3>
            <form class="row contact_form" action="{%url 'forgotpassword'%}" method="post" onsubmit="return validateForm()">
              {% csrf_token %}
              <div class="form-group first">
              
              

              <div class="form-group last mb-3">
                <label>Email</label>
                <input type="text" class="form-control" placeholder="Varifing email" value="{{pre_name}}" id="password" name="email">
              </div>

              
              
            

              <input type="submit" value="varify email" class="btn btn-block btn-primary">

              
              <div class="d-flex mb-5 align-items-center">
                <label class="control control--checkbox1 mb-0"><span class="captions">New to Foodie? <a href="{%url 'signup'%}"> Create account</a></span>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
  {% for msg in messages %}
  swal("", "{{msg}}", "error");
  {% endfor %}
</script>
<script>
  function validateForm() {
    var email = document.forms[0]["email"].value;
      if ( email == "") {
          alert("Please fill in all required fields.");
          return false;
      }
  }
</script>
{% endif %}
              


    <script src="{%static 'logincss/js/jquery-3.3.1.min.js'%}"></script>
    <script src="{%static 'logincss/js/popper.min.js'%}"></script>
    <script src="{%static 'logincss/js/bootstrap.min.js'%}"></script>
    <script src="{%static 'logincss/js/main.js'%}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
      // Wait for the document to be ready
    $(document).ready(function() {
    // Set a timeout to remove the error message after 5 seconds (5000 milliseconds)
     setTimeout(function() {
      $('#error-message').fadeOut('slow', function() {
          $(this).remove();
      });
    }, 5000); // Adjust the duration as needed
    });
    
    </script>
  </body>

</html>